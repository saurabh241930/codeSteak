/* global it, describe */ // npm standard ignore for describe and it

var net = require('net')

describe.only('API', function () {
  var assert = require('assert')
  var spawn = require('child_process').exec;

  it('Should throw if argument length is 0', function (done) {
    const reload = spawn('node bin/reload', [])

    reload.stdout.on('data', (data) => {
      console.log(`stdout: ${data}`);
    });

    reload.stderr.on('data', (data) => {
      console.log(`stderr: ${data}`);
    });

    reload.on('close', (code) => {
      console.log(`child process exited with code ${code}`);
      done();
    });

    setTimeout(function() {
      reload.kill('SIGKILL')
      done();
    }, 3000)
  })

// Helper function that closes reload WebSocket server after each test
function closeReloadSocket (reloadReturned, next) {
  if (reloadReturned) {
    if (reloadReturned.closeServer) {
      reloadReturned.closeServer(next)
      }
    else {
      next()
    }
  } else {
    next()
  }
}
})
